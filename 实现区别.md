## S1 手机实现
### syberh_qrcode.pri文件
```C++
PKGCONFIG += gstreamer-egl-0.10 android-headers
```

### C++
需要引入 `gralloc_priv.h`

```C++
// decodethread.cpp 实现有所区别
#include "gralloc_priv.h"
#include <gst/egl/egl.h>
#include <hybris/eglplatformcommon/hybris_nativebufferext.h>
#include <hybris/eglplatformcommon/nativewindowbase.h>

// 下面是部分有区别的代码
void DecodeThread::beginDecode(QVideoFrame frame) {
        GstEGLImageMemory *mem = (GstEGLImageMemory *) bits;
        ANativeWindowBuffer *nativeWindowBuffer = (ANativeWindowBuffer*)(mem->client_buffer);
        private_handle_t *handle = (private_handle_t *)nativeWindowBuffer->handle;

        QImage orgImg = QImage(frame.size(), QImage::Format_ARGB32);
        qt_convert_NV21_to_ARGB32((const uchar*)handle->base,
                                  (quint32 *)orgImg.bits(),
                                  clonedFrame.width(),
                                  clonedFrame.height());
}
```